
# Use the official MySQL image from Docker Hub
FROM mysql:latest

# Environment variables
ENV MYSQL_ROOT_PASSWORD=my-secret-pw
ENV MYSQL_DATABASE=my_database
ENV MYSQL_USER=db_user
ENV MYSQL_PASSWORD=db_password

# Copy the database SQL file to a temporary location
COPY ./database.sql /docker-entrypoint-initdb.d/database.sql

# Create a custom entrypoint script to handle database import
COPY ./custom-entrypoint.sh /docker-entrypoint-initdb.d/custom-entrypoint.sh
RUN chmod +x /docker-entrypoint-initdb.d/custom-entrypoint.sh

# Ensure MySQL is running continuously
CMD ["mysqld"]

# Optionally, you may expose ports if needed
EXPOSE 3306
